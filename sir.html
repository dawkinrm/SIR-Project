<!DOCTYPE html>
<html>

<head>
	<title>SIR Model</title>
	<script type="text/javascript" src="jscharts.js"></script>
</head>

<body>
	<center>SIR Model Output</center>

	<br>

	<div id="chartcontainer">This is just a replacement in case Javascript is not available or used for SEO purposes</div>

	<br>

	<div id="chartcontainer2">This is just a replacement in case Javascript is not available or used for SEO purposes</div>

	<br>

	<div id="chartcontainer3">This is just a replacement in case Javascript is not available or used for SEO purposes</div>

	<br>

	<script type="text/javascript">
	function sirModel()
	{
		var infectRate = 0.5;
		var removalRate = 0.3;
		var addedTime = 0;

		var S = 50;	
		var I = 1;
		var R = 0;

		var N = Math.round(S + I + R);

		var sList = []; sList2 = [];
		var iList = []; iList2 = [];
		var rList = []; rList2 = [];
		var time = [];
		var display = [];
		var display2 = [];
		var display3 = [];

		var x = document.getElementById("slist");
		var y = document.getElementById("ilist");
		var z = document.getElementById("rlist");

		var cure = false;

		while(!cure && S !== 0)
		{
			var newInfected = 0;

			for(var i=0; i<S; i++)
			{
				if(Math.random() < infectRate*(I/N))
					newInfected++;
			}

			var recovered = 0;

			for(var i=0; i<I; i++)
			{
				if(Math.random() < removalRate)
					recovered++;
			}

			S -= newInfected;
			I += (newInfected - recovered);

			if(I === 0)
			{
				I = 1;
				recovered -= 1;
			}

			R += recovered;

			sList.push(S);
			iList.push(I);
			rList.push(R);

			addedTime++;
			time.push(addedTime);
		}

		for(var i=0; i<sList.length; i++)
  		{
    		var combined = [time[i]];
    		combined.push(sList[i]);
        	display.push(combined);
         
  		}

  		for(var i=0; i<iList.length; i++)
  		{
    		var combined2 = [time[i]];
    		combined2.push(iList[i]);
        	display2.push(combined2);
         
  		}

  		for(var i=0; i<rList.length; i++)
  		{
    		var combined3 = [time[i]];
    		combined3.push(rList[i]);
        	display3.push(combined3);
         
  		}

  		//document.write(display);

		var myChart = new JSChart('chartcontainer', 'line');
		myChart.setDataArray(display);
		myChart.draw();

		var myChart2 = new JSChart('chartcontainer2', 'line');
		myChart2.setDataArray(display2);
		myChart2.draw();

		var myChart3 = new JSChart('chartcontainer3', 'line');
		myChart3.setDataArray(display3);
		myChart3.draw();

		sList.toString();
		iList.toString();
		rList.toString();

		x.innerHTML = sList.slice(0,50);
		y.innerHTML = iList.slice(0,50);
		z.innerHTML = rList.slice(0,50);

	}
	</script>
	
	<div>
		sList Output:<p id="slist"></p>
	</div>

	<div>
		iList Output:<p id="ilist"></p>
	</div>

	<div>
		rList Output:<p id="rlist"></p>
	</div>

	<button onclick="sirModel()">Click to initiate SIR model</button>
</body>

</html>